!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r,o;r=[t,n(1)],o=function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(t),o=angular.module("ebp.report.designer",["ngResource",r.default.name,"ebp-ui","angular-yao-utils"]);e.default=o}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t,n(2),n(3),n(4),n(5),n(6),n(7),n(8),n(30)],o=function(e,t,n,r,o,i,a,l,c){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(e,"__esModule",{value:!0});var d=u(t),p=s(n),f=s(r),v=s(o),b=s(l),h=s(c),y=angular.module("ebp.report.designer.core",[]);y.constant("defaultSettings",d.treeTableSettings).factory("reportDatasourceService",i.ReportDatasourceFactory).factory("reportService",a.ReportServiceFactory).controller("ChartPropsController",p.default).controller("TablePropsController",f.default).controller("DatasourcePropsController",v.default).directive("ebpReportWidget",h.default).directive("ebpReportDesigner",b.default),y.run(["yaoGuid",function(e){"ngInject";window.guid=e}]),e.default=y}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t],o=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.directiveNames={ebpTreeTable:"ebpTreetable",ebpTreeTableCol:"ebpTreetableCol",ebpTreeTableNode:"ebpTreetableNode",ebpTreeTableCell:"ebpTreetableCell",ebpTreeTableHeader:"columnheader"},e.treeTableSettings={expandAll:!1,colDefs:[],events:{edit:angular.noop,remove:angular.noop,add:angular.noop},dataSource:{read:null}}}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t],o=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function e(n){"ngInject";t(this,e),n.$chart=n.$designer.selectedItem,n.config=n.$chart.config};n.$inject=["$scope"],e.default=n}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t],o=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function e(n,r){"ngInject";t(this,e),n.$table=n.$designer.selectedItem,n.config=n.$table.config||{};var o=n.$designer.report;n.fields=[],o.dataSource&&r.getFields(o.dataSource.seqId).then(function(e){n.fields=e,angular.isArray(n.config.displayFields)&&n.config.displayFields.forEach(function(e){var t=_.find(n.fields,{seqId:e.seqId});t&&(t.$checked=!0)})}),n.onFieldStatusChange=function(e){if(e.$checked){var t=$.extend({},e);delete t.$checked,n.config.displayFields.push(t)}else _.remove(n.config.displayFields,function(t){return t.seqId===e.seqId})}};n.$inject=["$scope","reportDatasourceService"],e.default=n}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t],o=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function e(n,r){"ngInject";t(this,e);var o=n.report=n.$designer.report;n.fields=[],o.dataSource&&r.getFields(o.dataSource.seqId).then(function(e){n.fields=e,angular.isArray(o.filterFields)&&o.filterFields.forEach(function(e){var t=_.find(n.fields,{seqId:e.seqId});t&&(t.$checked=!0)})}),n.dataSources=[],r.getDataSources().then(function(e){n.dataSources=e}),n.onDataSourceChange=function(e){o.filterFields=[],o.dataSource&&r.getFields(e.seqId).then(function(e){n.fields=e})},n.onFilterFieldStatusChange=function(e){if(e.$checked){var t=$.extend({},e);delete t.$checked,o.filterFields.push(t)}else _.remove(o.filterFields,function(t){return t.seqId===e.seqId})}};n.$inject=["$scope","reportDatasourceService"],e.default=n}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t],o=function(e){"use strict";function t(e,t){function n(n){var r=t.defer(),o="/data/reports/datasource/1.json";return e.get(o,{params:{dataSrcSeqId:n}}).then(function(e){r.resolve(e.data)},function(e){r.reject(e)}),r.promise}function r(){var n=t.defer(),r="/data/reports/datasource/all.json";return e.get(r).then(function(e){n.resolve(e.data)},function(e){n.reject(e)}),n.promise}return{getFields:n,getDataSources:r}}Object.defineProperty(e,"__esModule",{value:!0}),e.ReportDatasourceFactory=t}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t],o=function(e){"use strict";function t(e,t){function n(n){var r=t.defer(),o="/plt/reportTpl/addReportTpl";return e.post(o,{reportName:n.title,reportTypeSeqId:123,remark:"备注",reportDef:JSON.stringify(n)}).then(function(e){n.seqId=e.data.rtData.seqId,r.resolve(e.data)},function(e){r.reject(e)}),r.promise}return{save:n}}Object.defineProperty(e,"__esModule",{value:!0}),e.ReportServiceFactory=t}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t,n(9),n(17),n(18),n(19)],o=function(e,t,n,r,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(){function e(e,t,n,r){t.addClass("report-designer");var o=t.find(".report-wrapper"),i=o.find(".report-header");o.find(".report-body");i.on("click",function(e){i.toggleClass("active")}),t.on("contextmenu",function(){return r.widgetSelector.toggle(),e.$digest(),!1})}var t={restrict:"AE",link:e,templateUrl:"src/designer/templates/designer.tpl.html",controller:f,controllerAs:"$designer"};return t}Object.defineProperty(e,"__esModule",{value:!0});var c=i(t),s=i(n),u=i(r),d=i(o),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(){function e(t,n,r,o){"ngInject";var i=this;a(this,e),this.widgetSelector=c.default.$invoke(this,{$scope:t,$element:n}),this.sidemenu=t.sidemenu=s.default.$invoke(this,{$scope:t,$element:n}),this.report=u.default.$invoke(this,{$scope:t,$element:n}),this.select=function(e){i.selectedItem&&i.selectedItem.element.removeClass("selected"),i.selectedItem=e,e.element.addClass("selected"),i.sidemenu.refresh()},this.preview=function(){r.open({templateUrl:"src/designer/templates/preview.tpl.html",controller:v,controllerAs:"$preview",resolve:{report:i.report}})},this.save=function(){o.save(i.report)}}return e.$inject=["$scope","$element","yaoFullscreen","reportService"],p(e,[{key:"addBloc",value:function(){var e=new d.default(this.report);this.report.insertBloc(e)}}]),e}(),v=function e(t,n,r,o){"ngInject";a(this,e),t.$report=r,this.close=function(){n.close()},this.exportHTML=function(){return angular.download(o.find(".report-wrapper")[0])},this.print=function(){print()}};v.$inject=["$scope","yaoFullscreen","report","$element"],e.default=l}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t,n(10)],o=function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=this,t=function(){function t(){var n=this;r(this,t),this.enable=!1,this.widgets=i,this.selectedWidget=i.BarChart,Object.defineProperties(e,{cursor:{get:function(){return n.enable?"cursor-"+n.selectedWidget.name:""}}})}return a(t,[{key:"toggle",value:function(){this.enable=!this.enable}},{key:"select",value:function(e){this.selectedWidget=e}}]),t}();return new t}Object.defineProperty(e,"__esModule",{value:!0});var i=n(t),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.default=o}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t,n(11),n(14),n(15),n(16)],o=function(e,t,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})}),Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})}),Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}),Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})})}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t,n(12)],o=function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.BarChart=void 0;var a=n(t),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.BarChart=function(e){function n(){r(this,n);var e=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.type=t.ChartType.BAR,e.name=n.name,e.title="柱状图",e}return i(n,e),l(n,null,[{key:"name",get:function(){return"barchart"}}]),n}(a.default)}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t,n(13)],o=function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){var e=this.$designer.sidemenu;e.changeTab(2,"src/designer/templates/charts-props.tpl.html"),this.$designer.select(this)}Object.defineProperty(e,"__esModule",{value:!0}),e.ChartType=void 0;var l=n(t),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},u=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.category="chart",e.type=null,e.title="图表",e.config={title:"未命名图表",dataSource:{url:"",params:[]}},e}return i(t,e),c(t,[{key:"render",value:function(){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this),this.element.on("click",a.bind(this)),this.element}}]),t}(l.default);e.ChartType={BAR:"bar",LINE:"line",PIE:"pie"};e.default=u}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t],o=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(){function e(){t(this,e),this.id=guid(),this.category=null,this.name=null,this.title="组件";var n=$("<div>").addClass("report-widget"),r=null;Object.defineProperties(this,{element:{get:function(){return n}},report:{set:function(e){return r=e},get:function(){return r}}})}return n(e,[{key:"render",value:function(){var e=this;this.element.attr("title",this.title),this.element.append($("<div>").addClass("widget-"+this.name));var t=$("<div>").addClass("widget-remove-button").on("click",function(){alert(2)}).hover(function(){e.element.addClass("warning")},function(){e.element.removeClass("warning")});return this.element.append(t),this.element}}]),e}();e.default=r}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t,n(12)],o=function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.LineChart=void 0;var a=n(t),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.LineChart=function(e){function n(){r(this,n);var e=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.type=t.ChartType.LINE,e.name=n.name,e.title="线图",e}return i(n,e),l(n,null,[{key:"name",get:function(){return"linechart"}}]),n}(a.default)}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t,n(12)],o=function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.PieChart=void 0;var a=n(t),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.PieChart=function(e){function n(){r(this,n);var e=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.type=t.ChartType.PIE,e.name=n.name,e.title="饼图",e}return i(n,e),l(n,null,[{key:"name",get:function(){return"piechart"}}]),n}(a.default)}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t,n(13)],o=function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){var e=this.$designer.sidemenu;e.changeTab(2,"src/designer/templates/table-props.tpl.html"),this.$designer.select(this)}Object.defineProperty(e,"__esModule",{value:!0}),e.Table=void 0;var l=n(t),c=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.Table=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.category="table",e.name=t.name,e.title="表格",e.config={title:"未命名表格",dataSource:{url:"",params:[]},displayFields:[]},e}return i(t,e),s(t,null,[{key:"name",get:function(){return"table"}}]),s(t,[{key:"render",value:function(){return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this),this.element.on("click",a.bind(this)),this.element}}]),t}(l.default)}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t],o=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,n,i){"ngInject";var a=!1,l=[{id:1,title:"报表",view:{templateUrl:"src/designer/templates/report-props.tpl.html"}},{id:2,title:"数据",view:{templateUrl:"src/designer/templates/datasource-props.tpl.html"}},{id:3,title:"组件"}],c=l[0],s=function(){function s(){t(this,s),e.find(".designer-menu").on("click",function(e){return e.stopPropagation()})}return o(s,[{key:"toggle",value:function(t){t.stopPropagation(),e.find(".menu-button").toggleClass("opened"),a=!a}},{key:"changeTab",value:function(e,t){"object"==("undefined"==typeof e?"undefined":r(e))&&(c=e),"number"==typeof e&&(c=l[e]),t&&(c.view={templateUrl:t}),n.$$phase||n.$apply()}},{key:"refresh",value:function(){var e=c.view;c.view={templateUrl:""},n.$$phase||n.$apply(),i(function(){c.view=e},0)}},{key:"opened",get:function(){return a}},{key:"tabs",get:function(){return l}},{key:"activeTab",get:function(){return c}}]),s}();return new s}n.$inject=["$element","$scope","$timeout"],Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.default=n}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t],o=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,n){"ngInject";var o=function(){function o(){var n=this;t(this,o),$.extend(this,{title:"未命名报表",subtitle:"关于此报表的详细说明",blocs:[],widgets:[],getWidget:function(e){return _.find(n.widgets,{id:e})}}),Object.defineProperties(this,{$scope:{get:function(){return e}}})}return r(o,[{key:"insertBloc",value:function(e){n.find(".report-body").append(e.render()),this.blocs.push(e)}},{key:"insertBlocAfter",value:function(e,t){var n=$.inArray(e,this.blocs)+1;0===n?this.insertBloc(t):(t.render().insertAfter(e.element),this.blocs.splice(n,0,t))}},{key:"removeBloc",value:function(t){var n=this,r=-1;(r=$.inArray(t,this.blocs))>-1&&e.$apply(function(){n.blocs.splice(r,1)})}}]),o}(),i=new o,a=this;return Object.defineProperties(i,{$designer:{get:function(){return a}}}),i}n.$inject=["$scope","$element"],Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.default=n}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t,n(20)],o=function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=this,t=$("<div>").addClass("report-bloc-wrapper");return this.selectPane=new s(this),t.append(this.selectPane.render()),setTimeout(function(){e.selectPane.open()},0),$compile(t)(this.report.$scope),t}function i(){var e=this,t=$("<div>").addClass("select-pane assistant"),n=$('\n            <span class="pull-left">\n                <i class="fa fa-angle-left"></i>\n            </span>\n        '),r=$('\n            <span class="pull-right">\n                <i class="fa fa-angle-right"></i>\n            </span>\n        '),o=$("<div>").addClass("pane-title").append(n).append(r),i=$("<div>").addClass("pane-body"),l=$("<ul>").addClass("pane-h-list");return angular.forEach(a,function(t){var n=t.thumbnail;l.append($("<li>").html(n)),n.on("click",function(){e.bloc.layout=new t(e.bloc)})}),i.append(l),t.append(o).append(i),t.on("click",function(e){e.stopPropagation()}),n.on("click",function(){var e=parseInt(l.css("margin-left")),t=300,n=0;e+=t,e>n&&(e=n),l.stop(!0,!0).animate({"margin-left":e})}),r.on("click",function(){var e=parseInt(l.css("margin-left")),t=300,n=i.width()-l.width()+20;e-=t,e<n&&(e=n),l.stop(!0,!0).animate({"margin-left":e})}),$compile(t)(this.report.$scope),t}Object.defineProperty(e,"__esModule",{value:!0});var a=n(t),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(){function e(t){var n=this;r(this,e);var o=null;Object.defineProperties(this,{report:{get:function(){return t}},layout:{get:function(){return o},set:function(t){o&&n.removeLayout(),o=t;var r=$("<div>").addClass("add-bloc-btn").text("+").on("click",function(){var t=new e(n.report);n.report.insertBlocAfter(n,t)}),i=t.render();i.append(r),n.element.append(i)}}})}return l(e,[{key:"render",value:function(){return this.element=o.bind(this).call(),this.element}},{key:"destroy",value:function(){this.element.remove()}},{key:"removeLayout",value:function(){this.layout.container.remove()}},{key:"toJSON",value:function(){var e=$.extend({},this);return delete e.element,delete e.selectPane,e.layout=this.layout,e}}]),e}(),s=function(){function e(t){r(this,e),Object.defineProperties(this,{bloc:{get:function(){return t}},report:{get:function(){return t.report}}})}return l(e,[{key:"render",value:function(){return this.element=i.bind(this).call(),this.element}},{key:"open",value:function(){var e=this;this.element.addClass("opened"),$(document).one("click",function(t){var n=$(t.target).parents().addBack();return!n.is(".select-pane")&&void(n.is(".report-designer")&&e.close())})}},{key:"close",value:function(){var e=this;this.element.removeClass("opened"),this.bloc.layout||setTimeout(function(){e.bloc.destroy(),e.report.removeBloc(e.bloc)},500)}}]),e}();e.default=c}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t,n(21),n(25),n(26),n(27),n(28),n(29)],o=function(e,t,n,r,o,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})}),Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})}),Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}),Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})}),Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})}),Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})})}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t,n(22),n(23)],o=function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.OneColumn=void 0;var l=r(t),c=r(n),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.OneColumn=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.addRow(new c.default(12,1)),n}return a(t,e),s(t,null,[{key:"thumbnail",get:function(){return $('\n            <div class="layout-thumbnail">\n                <div class="col-12"></div>\n            </div>\n        ')}}]),s(t,[{key:"render",value:function(){var e=this;return angular.forEach(this.rows,function(t){e.container.append(t.render())}),this.container}}]),t}(l.default)}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t],o=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(){var e=$("<div>").addClass("report-bloc");return e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(r){t(this,e),this.container=n(),this.rows=[],Object.defineProperties(this,{bloc:{get:function(){return r}}})}return r(e,[{key:"render",value:function(){return this.container}},{key:"addRow",value:function(e){var t=this;Object.defineProperties(e,{layout:{get:function(){return t}},$designer:{get:function(){return t.bloc.report.$designer}}}),this.rows.push(e)}},{key:"toJSON",value:function(){var e=$.extend({},this);return delete e.container,e}}]),e}();e.default=o}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t,n(24)],o=function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=this,r=$("<div>").addClass("report-row"),i=$("<div>").addClass("row-content"),a=[];if(e=e||12,Object.defineProperties(this,{cols:{get:function(){return a}},element:{get:function(){return r}}}),$.extend(this,{addColumn:function(e){Object.defineProperties(e,{$designer:{get:function(){return n.$designer}}}),a.push(e)},render:function(){return r.addClass("col-md-"+e).addClass(12===e?"no-padding":""),angular.forEach(a,function(e,t){return i.append(e.render(t))}),r.html(i),r},changeColsTo:function(e){a.length=0;for(var t=0;t<e;t++){var r=new o.default(12/e);n.addColumn(r)}i.empty(),n.render()},toJSON:function(){var t=$.extend({},n);return t.cols=a,t.size=e,t}}),t)for(var l=0;l<t;l++){var c=new o.default(12/t);this.addColumn(c)}r.on({click:function(e){if(!$(e.target).parents().addBack().is(".report-widget")){var t=n.$designer.sidemenu;t.changeTab(2,"src/designer/templates/row-props.tpl.html"),n.$designer.select(n)}},mouseover:function(e){$(e.target).parents().addBack().is(".report-widget")?i.removeClass("hover-intent"):i.addClass("hover-intent")}}),i.hover(function(){i.addClass("hover-intent")},function(){i.removeClass("hover-intent")})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var o=n(t)}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t],o=function(e){"use strict";function t(e){var t=this,n=$("<div>").addClass("report-col"),r=$("<div>").addClass("col-content");e=e||12,Object.defineProperties(this,{size:{get:function(){return e}}}),$.extend(this,{render:function(t){return n.addClass("col-xs-"+e),n.addClass("num-"+t),n.html(r),n},toJSON:function(){var n=$.extend({},t);return n.size=e,n}}),r.on("click",function(){var e=t.$designer.widgetSelector;if(e.enable){var n=new e.selectedWidget;t.$designer.report.widgets.push(n),n.report=t.$designer.report,t.content={id:n.id},Object.defineProperties(n,{$designer:{get:function(){return t.$designer}}}),r.html(n.render())}})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=t}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t,n(22),n(23)],o=function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.TwoColumn=void 0;var l=r(t),c=r(n),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.TwoColumn=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.addRow(new c.default(12,2)),n}return a(t,e),s(t,null,[{key:"thumbnail",get:function(){return $('\n            <div class="layout-thumbnail">\n                <div class="col-6"></div>\n                <div class="col-6"></div>\n            </div>\n        ')}}]),s(t,[{key:"render",value:function(){var e=this;return angular.forEach(this.rows,function(t){e.container.append(t.render())}),this.container}}]),t}(l.default)}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t,n(22),n(23)],o=function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t;
}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.ThreeColumn=void 0;var l=r(t),c=r(n),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.ThreeColumn=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.addRow(new c.default(12,3)),n}return a(t,e),s(t,null,[{key:"thumbnail",get:function(){return $('\n            <div class="layout-thumbnail">\n                <div class="col-4"></div>\n                <div class="col-4"></div>\n                <div class="col-4"></div>\n            </div>\n        ')}}]),s(t,[{key:"render",value:function(){var e=this;return angular.forEach(this.rows,function(t){e.container.append(t.render())}),this.container}}]),t}(l.default)}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t,n(22),n(23)],o=function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.FourColumn=void 0;var l=r(t),c=r(n),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.FourColumn=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.addRow(new c.default(12,4)),n}return a(t,e),s(t,null,[{key:"thumbnail",get:function(){return $('\n            <div class="layout-thumbnail">\n                <div class="col-3"></div>\n                <div class="col-3"></div>\n                <div class="col-3"></div>\n                <div class="col-3"></div>\n            </div>\n        ')}}]),s(t,[{key:"render",value:function(){var e=this;return angular.forEach(this.rows,function(t){e.container.append(t.render())}),this.container}}]),t}(l.default)}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t,n(22),n(23),n(24)],o=function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.TwoToOne=void 0;var c=o(t),s=o(n),u=o(r),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.TwoToOne=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=new s.default(12);return r.addColumn(new u.default(8)),r.addColumn(new u.default(4)),n.addRow(r),n}return l(t,e),d(t,null,[{key:"thumbnail",get:function(){return $('\n            <div class="layout-thumbnail">\n                <div class="col-8"></div>\n                <div class="col-4"></div>\n            </div>\n        ')}}]),d(t,[{key:"render",value:function(){var e=this;return angular.forEach(this.rows,function(t){e.container.append(t.render())}),this.container}}]),t}(c.default)}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t,n(22),n(23),n(24)],o=function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.OneToTwo=void 0;var c=o(t),s=o(n),u=o(r),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.OneToTwo=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=new s.default(12);return r.addColumn(new u.default(4)),r.addColumn(new u.default(8)),n.addRow(r),n}return l(t,e),d(t,null,[{key:"thumbnail",get:function(){return $('\n            <div class="layout-thumbnail">\n                <div class="col-4"></div>\n                <div class="col-8"></div>\n            </div>\n        ')}}]),d(t,[{key:"render",value:function(){var e=this;return angular.forEach(this.rows,function(t){e.container.append(t.render())}),this.container}}]),t}(c.default)}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t,n(31),n(32)],o=function(e,t,n){"use strict";function r(){function e(e,r){var o=e.widget;return!!o&&void e.$on("yaoFullscreen.afterRender",function(){"chart"===o.category&&n.renderChart.$invoke(this,{scope:e,elem:r,widget:o}),"table"===o.category&&t.renderTable.$invoke(this,{scope:e,elem:r,widget:o})})}var r={restrict:"AE",link:e,scope:{widget:"=ebpReportWidget"}};return r}Object.defineProperty(e,"__esModule",{value:!0});e.default=r}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t],o=function(e){"use strict";function t(e,t,n,r,o){function i(e){var t=[],n=e.config,r=n.displayFields;return r.forEach(function(e){var n={name:e.dataSrcItemName,title:e.dataSrcItemLabel,type:"field",dataType:"string"};t.push(n)}),{cols:t}}var a=$("<div>").addClass("report-widget-title").text(r.config.title),l=$("<div>",{"ebp-table":"$tableView.ebpTable",settings:"$tableView.widgetSettings","ng-model":"$tableView.tableData"}),c={colDefs:i(r)};e.$tableView={tableData:[],ebpTable:{},widgetSettings:c};var s="/data/reports/table/1.json";o.get(s,{params:{dataSrcId:1,widgetId:"4ac50dd7-a273-31fd-b16a-8f86d449ba2c"}}).then(function(r){e.$tableView.tableData=r.data,t.append(a),t.append(n(l)(e))})}Object.defineProperty(e,"__esModule",{value:!0}),e.renderTable=t}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[t],o=function(e){"use strict";function t(e,t,n,r){"ngInject";n.get("/data/reports/salesVolumn.json").then(function(n){var o=n.data,i=o.data;e.height(400),"undefined"==typeof echarts&&r.requirejs&&angular.isFunction(r.requirejs)&&(r.echarts=requirejs("echarts"));var a=echarts.init(e[0]),l=t.config,c=[];i.length>0&&(c=i[0].datapoints.map(function(e){return e.x}));var s={title:{text:l.title},tooltip:{},legend:{data:i.map(function(e){return e.name}),bottom:0},toolbox:{feature:{magicType:{type:["stack","tiled"]},dataView:{},saveAsImage:{pixelRatio:2}}},xAxis:{data:c},yAxis:{},series:i.map(function(e){return{name:e.name,type:t.type,data:e.datapoints.map(function(e){return e.y})}})};a.setOption(s),$(window).on("resize",function(){a.resize()})})}t.$inject=["elem","widget","$http","$window"],Object.defineProperty(e,"__esModule",{value:!0}),e.renderChart=t}.apply(t,r),!(void 0!==o&&(e.exports=o))}]),angular.module("ebp.report.designer").run(["$templateCache",function(e){e.put("src/designer/templates/add.tpl.html",'<div ct-report-designer=""></div>'),e.put("src/designer/templates/charts-props.tpl.html",'<div class="chart-props" ng-controller="ChartPropsController"><div class="content-title"><span>{{$chart.title}}</span></div><div class="content-body"><div class="prop-group"><h1 class="square-blue">设置</h1><div class="form-group"><label class="prop-label col-sm-4" for="chartTitle">标题</label><div class="prop-control col-sm-8"><input class="prop-input" ng-model="config.title" id="chartTitle"></div></div></div></div></div>'),e.put("src/designer/templates/datasource-props.tpl.html",'<div class="row-props" ng-controller="DatasourcePropsController"><div class="content-title"><span>数据</span></div><div class="content-body"><div class="prop-group"><h1 class="square-blue">属性</h1><div class="form-group"><label class="prop-label col-sm-4" for="dataSource">数据来源</label><div class="prop-control col-sm-8"><select class="prop-select" id="dataSource" ng-change="onDataSourceChange(report.dataSource)" ng-model="report.dataSource" ng-options="i.dataSrcName for i in dataSources track by i.seqId"><option value="">-- 选择数据源 --</option></select></div></div></div><div class="prop-group"><h1 class="square-pink">可查询字段</h1><div class="form-group"><div class="prop-control col-sm-12"><label ng-repeat="field in fields"><input type="checkbox" ng-model="field.$checked" ng-change="onFilterFieldStatusChange(field)"> {{field.dataSrcItemLabel}}</label></div></div></div></div></div>'),e.put("src/designer/templates/designer.tpl.html",'<div class="designer-menu assistant" ng-class="{opened: sidemenu.opened}"><div class="menu-inner"><div class="menu-title"><ul class="nav-tabs"><li ng-class="{\'active\': sidemenu.activeTab.id === tab.id}" ng-repeat="tab in sidemenu.tabs track by tab.id"><a href="" ng-click="sidemenu.changeTab(tab)">{{tab.title}}</a></li></ul></div><div class="menu-content"><div class="nav-content"><div ng-include="sidemenu.activeTab.view.templateUrl"></div></div></div></div></div><div class="designer-content"><div class="designer-topbar assistant"><a ng-click="$designer.preview()" class="label label-primary"><i class="fa fa-eye"></i> 预览</a> <a class="label label-success" ng-click="$designer.save()"><i class="fa fa-save"></i> 保存</a> <a href="" class="pull-right" ng-click="sidemenu.toggle($event)"><span class="menu-button"></span></a></div><div class="report-wrapper" yao-scrollbar=""><div class="report-header"><h1><span yao-editable="$designer.report.title"></span></h1><h3 yao-editable="$designer.report.subtitle"></h3><span class="export-btn"><button class="btn btn-info">导出</button></span></div><div class="report-body" ng-class="[$designer.cursor]"><div ng-if="$designer.report.blocs.length <= 0" class="empty-prompt assistant" ng-click="$designer.addBloc()"><h3>没有组件!</h3><p>此处是报表设计的预览界面，当前还没有任何可用于预览的组件，点击添加组件。</p></div></div></div><div class="widget-selector" ng-show="$designer.widgetSelector.enable"><ul class="widget-shortcut-list"><li ng-click="$designer.widgetSelector.select(widget)" ng-class="{\'active\': $designer.widgetSelector.selectedWidget === widget}" ng-repeat="widget in $designer.widgetSelector.widgets"><span class="shortcut-icon {{widget.name}}-icon"></span></li><li><span class="shortcut-icon plus-icon"></span></li></ul></div></div>'),e.put("src/designer/templates/edit.tpl.html",'<div ct-report-designer="" report-id="$state.params.reportId"></div>'),e.put("src/designer/templates/preview.tpl.html",'<div class="report-preview" yao-scrollbar=""><pre>{{$report | json:3}}</pre><div class="report-wrapper"><div class="report-header"><h1>{{$report.title}}</h1><h3>{{$report.subtitle}}</h3><span class="export-btn"><button class="btn btn-info">导出</button></span></div><form class="report-filter-form form-horizontal" ng-if="$report.filterFields.length > 0"><div class="col-md-6" ng-repeat="field in $report.filterFields"><div class="form-group"><label for="field-input-{{field.seqId}}" class="col-sm-4 control-label">{{field.dataSrcItemLabel}}:</label><div class="col-sm-8"><input type="text" class="form-control" id="field-input-{{field.seqId}}" ng-if="field.dataSrcItemType === \'text\'"><select class="form-control" id="field-input-{{field.seqId}}" ng-if="field.dataSrcItemType === \'select\'"><option>选项1</option><option>选项2</option><option>选项3</option><option>选项4</option></select></div></div></div></form><div class="report-body"><div class="report-bloc-wrapper" ng-repeat="bloc in $report.blocs"><div class="report-bloc"><div class="report-row col-md-{{row.size || 12}}" ng-class="{\'no-padding\': row.size === 12}" ng-repeat="row in bloc.layout.rows"><div class="row-content"><div class="report-col col-xs-{{col.size || 12}}" ng-repeat="col in row.cols"><div class="col-content"><div ebp-report-widget="$report.getWidget(col.content.id)"></div></div></div></div></div></div></div></div></div></div><div class="report-preview-actions"><button ng-click="$preview.close()" class="btn btn-sup btn-danger"><i class="fa fa-close"></i> 关闭</button> <button ng-click="$preview.print()" class="btn btn-sup btn-primary"><i class="fa fa-print"></i> 打印</button> <button ng-click="$preview.exportHTML()" class="btn btn-sup btn-success"><i class="fa fa-external-link"></i> 导出HTML文本</button></div>'),e.put("src/designer/templates/report-props.tpl.html",'<div class="row-props"><div class="content-title"><span>报表</span></div><div class="content-body"><div class="prop-group"><h1 class="square-blue">属性</h1><div class="form-group"><label class="prop-label col-sm-4" for="reportTitle">标题</label><div class="prop-control col-sm-8"><input class="prop-input" ng-model="$designer.report.title" id="reportTitle"></div></div><div class="form-group"><label class="prop-label col-sm-4" for="reportSubtitle">说明</label><div class="prop-control col-sm-8"><textarea class="prop-textarea" ng-model="$designer.report.subtitle" id="reportSubtitle"></textarea></div></div></div></div></div>'),e.put("src/designer/templates/row-props.tpl.html",'<div class="row-props"><div class="content-title"><span>行</span></div><div class="content-body"><div class="prop-group"><h1 class="square-blue">样式</h1><div class="form-group" ng-init="selected = $designer.selectedItem.cols.length"><label class="prop-label col-sm-4" for="columnsSel">列数</label><div class="prop-control col-sm-8"><select class="prop-select" id="columnsSel" ng-change="$designer.selectedItem.changeColsTo(selected)" ng-model="selected" ng-options="i for i in [1,2,3,4,6]"></select></div></div></div></div></div>'),e.put("src/designer/templates/table-props.tpl.html",'<div class="chart-props" ng-controller="TablePropsController"><div class="content-title"><span>{{$table.title}}</span></div><div class="content-body"><div class="prop-group"><h1 class="square-blue">设置</h1><div class="form-group"><label class="prop-label col-sm-4" for="tableTitle">标题</label><div class="prop-control col-sm-8"><input class="prop-input" ng-model="config.title" id="tableTitle"></div></div></div><div class="prop-group"><h1 class="square-pink">表头属性</h1><div class="form-group"><div class="prop-control col-sm-12"><label ng-repeat="field in fields"><input type="checkbox" ng-model="field.$checked" ng-change="onFieldStatusChange(field)"> {{field.dataSrcItemLabel}}</label></div></div></div></div></div>')}]);